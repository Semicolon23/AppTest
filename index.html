<!DOCTYPE html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="socket.io/socket.io.js"></script>
		<script>
		/* Listeners and Related Functions */

		var socket = io().connect('http://localhost:5000');

		/* Listens for the boardUpdate from server. When detected,
		it takes enemy board data and puts it into it's right side */
		socket.on('boardUpdate', function(data){
			enemyArea=data;
			arena=enemyArea[3];
		});

		/*Listens for phaseIndicator from server. When detected,
		it sets the phase indicator to whatever other client clicked */
		socket.on('phaseIndicator', function(data){
			currentPhase=data;
		})


		</script>
		<style>
		.modal {
			display: none; /* Hidden by default */
			position: fixed; /* Stay in place */
			z-index: 7; /* Sit on top */
			padding-top: 100px; /* Location of the box */
			left: 0;
			top: 0;
			width: 100%; /* Full width */
			height: 100%; /* Full height */
			overflow: auto; /* Enable scroll if needed */
			background-color: rgb(0,0,0); /* Fallback color */
			background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
		}

		/* Modal Content (image) */
		.modal-content {
			margin: auto;
			display: block;
			width: 80%;
			max-width: 700px;
		}

		/* Caption of Modal Image */
		#caption {
			margin: auto;
			display: block;
			width: 80%;
			max-width: 700px;
			text-align: center;
			color: #ccc;
			padding: 10px 0;
			height: 150px;
		}

		/* Add Animation */
		.modal-content, #caption {
			-webkit-animation-name: zoom;
			-webkit-animation-duration: 0.6s;
			animation-name: zoom;
			animation-duration: 0.6s;
		}

		@-webkit-keyframes zoom {
			from {-webkit-transform:scale(0)}
			to {-webkit-transform:scale(1)}
		}

		@keyframes zoom {
			from {transform:scale(0)}
			to {transform:scale(1)}
		}

		/* The Close Button */
		.close {
			position: absolute;
			top: 15px;
			right: 35px;
			color: #f1f1f1;
			font-size: 40px;
			font-weight: bold;
			transition: 0.3s;
		}

		.close:hover,
		.close:focus {
			color: #bbb;
			text-decoration: none;
			cursor: pointer;
		}

		/* 100% Image Width on Smaller Screens */
		@media only screen and (max-width: 700px){
			.modal-content {
				width: 100%;
			}
		}

		.rotate90 {
			-webkit-transform: rotate(90deg);
			-moz-transform: rotate(90deg);
			-o-transform: rotate(90deg);
			-ms-transform: rotate(90deg);
			transform: rotate(90deg);
		}
		.rotate0 {
			-webkit-transform: rotate(0deg);
			-moz-transform: rotate(0deg);
			-o-transform: rotate(0deg);
			-ms-transform: rotate(0deg);
			transform: rotate(0deg);
		}
		body {background-color: grey;}
		</style>
		<img id="back" width="70" height="100" src="CardBack.png" alt="Card Back">
	</head>
	<body id="body" style="margin: 0px; overflow: hidden">
		<canvas id="myCanvas" width="800" height="930" style="position: absolute; left:0px; top:0px; z-index:1;"></canvas>
		<img id="reward1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="reward" >
		<img id="leader1" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:6;" alt="leader" >
		<img id="leader1s1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="skill" >
		<img id="leader1s2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="leader1s3" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="arena1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="arena" >
		<img id="dungeon1" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="dungeon" >
		<img id="vault1" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="vault" >
		<img id="support1a" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support1b" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support1c" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support1d" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="council1a" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council1as1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council1as2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council1b" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council1bs1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council1bs2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council1c" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council1cs1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council1cs2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council1d" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council1ds1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council1ds2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >

		<img id="reward2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="reward" >
		<img id="leader2" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:6;" alt="leader" >
		<img id="leader2s1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="skill" >
		<img id="leader2s2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="leader2s3" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="arena2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="arena" >
		<img id="dungeon2" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="dungeon" >
		<img id="vault2" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="vault" >
		<img id="support2a" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support2b" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support2c" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support2d" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="council2a" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council2as1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council2as2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council2b" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council2bs1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council2bs2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council2c" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council2cs1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council2cs2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council2d" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council2ds1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council2ds2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >

		<div id="myModal" class="modal">
		  <span class="close">&times;</span>
		  <img class="modal-content" id="img01">
		  <div id="caption"></div>
		</div>

		<script>
			var modal = document.getElementById('myModal');
			var theCanvas = document.getElementById("myCanvas"),
				c = theCanvas.getContext("2d"),
				cardHeight=100, cardWidth=75, boardWidth=window.innerWidth, boardHeight=window.innerHeight, spacing=25,
				ch=cardHeight, cw=cardWidth, bw=boardWidth, bh=boardHeight, s=spacing;
			var cardTemplate={name:"Empty",type:"",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png"};
			var currentPhase=1;
			var paused=1;
			var trueTime;
			var time=0;
			var minutes=0;
			var flipped=0;
			//Card displacement for rotated cards
			var d = (ch-cw)/2;
			var imgHand=[];
			var heroes=[];
			var imgHeroes=[];
			var setUp = 0;
			var decks=[];
			var reward=[];
			var leader;
			var leaderSkills=[{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""}];
			var arena={name:"",image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png"};
			var dungeon=[];
			var support=[{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""}];
			var deck=[];
			var council=[];
			var councilSkills=[{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""}];
			var hand=[];
			var playerArea=[reward,leader,leaderSkills,arena,dungeon,support,deck,council,councilSkills];

			var ereward=[];
			var eleader;
			var eleaderSkills=[{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""}];
			var earena={name:"",image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png"};
			var edungeon=[];
			var esupport=[{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""}];
			var edeck=[];
			var ecouncil=[];
			var ecouncilSkills=[{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""},{image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""}];
			var enemyArea=[ereward,eleader,eleaderSkills,earena,edungeon,esupport,edeck,ecouncil,ecouncilSkills];
			var command=[];

			//Keep track of all the images
			var pictures = [document.getElementById("reward1"),document.getElementById("leader1"),
					document.getElementById("leader1s1"),document.getElementById("leader1s2"),
					document.getElementById("leader1s3"),document.getElementById("arena1"),
					document.getElementById("dungeon1"),document.getElementById("vault1"),
					document.getElementById("support1a"),document.getElementById("support1b"),
					document.getElementById("support1c"),document.getElementById("support1d"),
					document.getElementById("council1a"),document.getElementById("council1as1"),
					document.getElementById("council1as2"),document.getElementById("council1b"),
					document.getElementById("council1bs1"),document.getElementById("council1bs2"),
					document.getElementById("council1c"),document.getElementById("council1cs1"),
					document.getElementById("council1cs2"), document.getElementById("council1d"),
					document.getElementById("council1ds1"), document.getElementById("council1ds2"),
					document.getElementById("reward2"),document.getElementById("leader2"),
					document.getElementById("leader2s1"),document.getElementById("leader2s2"),
					document.getElementById("leader2s3"),document.getElementById("arena2"),
					document.getElementById("dungeon2"),document.getElementById("vault2"),
					document.getElementById("support2a"),document.getElementById("support2b"),
					document.getElementById("support2c"),document.getElementById("support2d"),
					document.getElementById("council2a"),document.getElementById("council2as1"),
					document.getElementById("council2as2"),document.getElementById("council2b"),
					document.getElementById("council2bs1"),document.getElementById("council2bs2"),
					document.getElementById("council2c"),document.getElementById("council2cs1"),
					document.getElementById("council2cs2"), document.getElementById("council2d"),
					document.getElementById("council2ds1"), document.getElementById("council2ds2")];

			function dummyDeck(){
				heroes.push({name:"Azmodan",type:"leader",hp:50,dmg:-1,den:0,cd:-1,image:"https://vignette4.wikia.nocookie.net/diablo/images/c/c7/600px-Azmodan-BC2011.jpg/revision/latest/scale-to-width-down/180?cb=20120808020040"});
				heroes.push({name:"Kulle",type:"leader",hp:40,dmg:-1,den:0,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/f/f3/ZoltunKulle.png/revision/latest?cb=20120606004831"});
				heroes.push({name:"Belial",type:"leader",hp:45,dmg:-1,den:0,cd:-1,image:"https://hydra-media.cursecdn.com/heroesofthestorm.gamepedia.com/thumb/5/58/BelialArt.jpg/240px-BelialArt.jpg?version=2e1223eca17d6481cfcb02900c7a58b2"});
				heroes.push({name:"Leoric",type:"leader",hp:55,dmg:-1,den:0,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/2/29/KingLeoric.png/revision/latest?cb=20120603170950"});
				heroes.push({name:"Diablo",type:"leader",hp:60,dmg:-1,den:0,cd:-1,image:"https://vignette3.wikia.nocookie.net/diablo/images/3/3a/Diablo_Diablo_III_full_body.PNG/revision/latest?cb=20120513133435"});

				reward.push({name:"Chest",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/4/44/D3Chest.png/revision/latest?cb=20160501170356"});
				reward.push({name:"Map",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://s-media-cache-ak0.pinimg.com/originals/62/0f/83/620f83c378099656bdd9740fea83e3a4.jpg"});
				reward.push({name:"Loot",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://s3.amazonaws.com/digitaltrends-uploads-prod/2014/05/diablo-3-legendaries.jpg"});
				reward.push({name:"Portal",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://vignette4.wikia.nocookie.net/diablo/images/8/85/Infernalgate1.JPG/revision/latest?cb=20080714124146"});
				reward.push({name:"Level Up",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://www.diabloii.net/wp-content/uploads/2012/05/Level-up2.jpg"});
				reward.push({name:"Pet Spider",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://vignette2.wikia.nocookie.net/diablo/images/2/21/Charlotte.jpg/revision/latest?cb=20160430122716"});
				reward.push({name:"Whimsydale Portal",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://www.diablowiki.net/images/thumb/d/d4/Whimsydale1.jpg/300px-Whimsydale1.jpg"});
				reward.push({name:"Angel Wings",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/8/82/Angelicwings.jpg/revision/latest?cb=20140803204315"});
				reward.push({name:"Pennant",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://vignette2.wikia.nocookie.net/diablo/images/5/50/Flagge-der-Gefallenen-breit.jpg/revision/latest?cb=20160526212917"});
				reward.push({name:"Cool Emblem",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://www.zastavki.com/pictures/originals/2015/Games_Symbol_game_Diablo_3_097303_.jpg"});
				reward.push({name:"Hardcore Mode",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://vignette2.wikia.nocookie.net/diablo/images/a/a2/Diablo-hardcore.jpg/revision/latest?cb=20140522042008"});
				reward.push({name:"Season",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://bnetcmsus-a.akamaihd.net/cms/blog_header/o0/O06WOWNXPUWO1489791908687.jpg"});
				reward.push({name:"Treasure Goblin",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://vignette2.wikia.nocookie.net/diablo/images/a/a3/TGoblinArt.png/revision/latest?cb=20140814103321"});
				reward.push({name:"Infernal Machine",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://www.diablowiki.net/images/2/2c/Icon_portal_device.png"});
				reward.push({name:"Town Portal",type:"reward",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://classic.battle.net/images/battle/diablo2exp/images/animations/portal.gif"});

				deck.push({name:"Realm of Terror",type:"Diablo Supreme",hp:-1,dmg:-1,den:-1,cd:4,image:"https://c1.staticflickr.com/4/3934/15403147356_a2695c35fd_b.jpg"});
				deck.push({name:"Shadow Clone",type:"Diablo Supreme",hp:-1,dmg:-1,den:-1,cd:4,image:"https://vignette3.wikia.nocookie.net/diablo/images/a/a3/Diablo-3-5.jpg/revision/latest?cb=20150919141708"});
				deck.push({name:"Slash",type:"Diablo",hp:-1,dmg:-1,den:-1,cd:1,image:"http://game-icons.net/icons/lorc/originals/svg/quick-slash.svg"});
				deck.push({name:"Fireball",type:"Diablo",hp:-1,dmg:-1,den:-1,cd:1,image:"https://portforward.com/games/walkthroughs/Diablo-3/Diablo-3-large-299.jpg"});
				deck.push({name:"Flame Circle",type:"Diablo",hp:-1,dmg:-1,den:-1,cd:2,image:"https://vignette2.wikia.nocookie.net/diablo/images/8/8e/Monster_Fire_Nova.jpg/revision/latest?cb=20110523093522"});
				deck.push({name:"Fire Wall",type:"Diablo",hp:-1,dmg:-1,den:-1,cd:2,image:"https://vignette2.wikia.nocookie.net/diablo/images/7/78/Monster_Fire_Wall.jpg/revision/latest?cb=20110813213105"});
				deck.push({name:"Bone Prison",type:"Diablo",hp:-1,dmg:-1,den:-1,cd:3,image:"https://vignette2.wikia.nocookie.net/diablo/images/7/78/BonePrisoner.jpg/revision/latest?cb=20150913104142"});
				deck.push({name:"Teleport",type:"Diablo",hp:-1,dmg:-1,den:-1,cd:2,image:"https://us.battle.net/d3/static/images/hero/skill/wizard/teleport.jpg?v=58-100"});

				deck.push({name:"Skeleton",type:"Leoric",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://vignette3.wikia.nocookie.net/diablo/images/2/2d/Skeleton_Shieldman.jpg/revision/latest?cb=20080826061736"});
				deck.push({name:"Skeletal Swing",type:"Leoric",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://static.icy-veins.com/images/heroes/icons/large/storm_ui_icon_leoric_skeletalswing_undead.jpg"});
				deck.push({name:"Demon",type:"Azmodan",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://www.primagames.com/media/images/news/diablo.jpg"});
				deck.push({name:"Fireball",type:"Azmodan",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://hydra-media.cursecdn.com/diablo.gamepedia.com/thumb/7/7f/Be_Cool.png/175px-Be_Cool.png?version=ab89942e0d67cd39dc2329d88c175e7b"});
				deck.push({name:"Show True Form",type:"Belial",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://vignette2.wikia.nocookie.net/villains/images/1/1c/Belial%21x1000_0_%284%29.jpg/revision/latest?cb=20150630233009"});
				deck.push({name:"Confidence",type:"Belial",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=205224&type=card"});
				deck.push({name:"Tornado",type:"Kulle",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/2/2e/Energy-twister5-sml.jpg/revision/latest?cb=20140606111755"});
				deck.push({name:"Time Bubble",type:"Kulle",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://us.battle.net/d3/static/images/hero/skill/wizard/slow-time.jpg?v=58-100"});

				deck.push({name:"Tomb Guardian",type:"support",hp:3,dmg:3,den:-1,cd:-1,image:"http://www.diablo1.ru/images/diablo3/monsters/tomb-guardian.jpg"});
				deck.push({name:"Tomb Guardian",type:"support",hp:3,dmg:3,den:-1,cd:-1,image:"http://www.diablo1.ru/images/diablo3/monsters/tomb-guardian.jpg"});
				deck.push({name:"Ghostly Murderer",type:"support",hp:2,dmg:4,den:-1,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/6/63/GHASTLY_GRAVEDIGGER.jpg/revision/latest?cb=20140525013438"});
				deck.push({name:"Ghostly Murderer",type:"support",hp:2,dmg:4,den:-1,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/6/63/GHASTLY_GRAVEDIGGER.jpg/revision/latest?cb=20140525013438"});
				deck.push({name:"Unburied",type:"support",hp:4,dmg:3,den:-1,cd:-1,image:"https://hydra-media.cursecdn.com/diablo.gamepedia.com/thumb/f/f2/Unburied.png/300px-Unburied.png?version=382cba343f18ef2c7c8eebdedc8724b4"});
				deck.push({name:"Unburied",type:"support",hp:4,dmg:3,den:-1,cd:-1,image:"https://hydra-media.cursecdn.com/diablo.gamepedia.com/thumb/f/f2/Unburied.png/300px-Unburied.png?version=382cba343f18ef2c7c8eebdedc8724b4"});
				deck.push({name:"Unburied",type:"support",hp:4,dmg:3,den:-1,cd:-1,image:"https://hydra-media.cursecdn.com/diablo.gamepedia.com/thumb/f/f2/Unburied.png/300px-Unburied.png?version=382cba343f18ef2c7c8eebdedc8724b4"});
				deck.push({name:"Dark Cultist",type:"support",hp:1,dmg:2,den:-1,cd:-1,image:"https://vignette4.wikia.nocookie.net/diablo/images/e/e7/Dark_Cultist_2.jpg/revision/latest?cb=20080825212850"});
				deck.push({name:"Dark Cultist",type:"support",hp:1,dmg:2,den:-1,cd:-1,image:"https://vignette4.wikia.nocookie.net/diablo/images/e/e7/Dark_Cultist_2.jpg/revision/latest?cb=20080825212850"});
				deck.push({name:"Skeleton Archer",type:"support",hp:1,dmg:3,den:-1,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/d/dc/Dark_skeletal_archer.png/revision/latest/scale-to-width-down/180?cb=20170428163418"});
				deck.push({name:"Accursed",type:"support",hp:2,dmg:2,den:-1,cd:-1,image:"http://vignette3.wikia.nocookie.net/diablo/images/c/c3/2_Plagar_the_Damned_c.jpg/revision/latest?cb=20140811114034"});
				deck.push({name:"Accursed",type:"support",hp:2,dmg:2,den:-1,cd:-1,image:"http://vignette3.wikia.nocookie.net/diablo/images/c/c3/2_Plagar_the_Damned_c.jpg/revision/latest?cb=20140811114034"});
				deck.push({name:"Accursed",type:"support",hp:2,dmg:2,den:-1,cd:-1,image:"http://vignette3.wikia.nocookie.net/diablo/images/c/c3/2_Plagar_the_Damned_c.jpg/revision/latest?cb=20140811114034"});
				deck.push({name:"Dune Dervish",type:"support",hp:4,dmg:2,den:-1,cd:-1,image:"http://www.diablo3-esp.com/imagenes/bestiario/acto-ii/derviche-de-la-duna-dune-dervish.jpg"});
				deck.push({name:"Dune Dervish",type:"support",hp:4,dmg:2,den:-1,cd:-1,image:"http://www.diablo3-esp.com/imagenes/bestiario/acto-ii/derviche-de-la-duna-dune-dervish.jpg"});
				deck.push({name:"Fallen",type:"support",hp:3,dmg:3,den:-1,cd:-1,image:"https://vignette3.wikia.nocookie.net/diablo/images/1/1c/OverseerD3.jpg/revision/latest?cb=20090523163115"});
				deck.push({name:"Fallen",type:"support",hp:3,dmg:3,den:-1,cd:-1,image:"https://vignette3.wikia.nocookie.net/diablo/images/1/1c/OverseerD3.jpg/revision/latest?cb=20090523163115"});
				deck.push({name:"Fallen",type:"support",hp:3,dmg:3,den:-1,cd:-1,image:"https://vignette3.wikia.nocookie.net/diablo/images/1/1c/OverseerD3.jpg/revision/latest?cb=20090523163115"});
				deck.push({name:"Sand Dweller",type:"support",hp:5,dmg:2,den:-1,cd:-1,image:"http://www.d3achieve.com/img/enemy/sand-dweller.jpg"});
				deck.push({name:"Sand Dweller",type:"support",hp:5,dmg:2,den:-1,cd:-1,image:"http://www.d3achieve.com/img/enemy/sand-dweller.jpg"});
				deck.push({name:"Collosal Golgor",type:"support",hp:4,dmg:3,den:-1,cd:-1,image:"http://vignette3.wikia.nocookie.net/diablo/images/1/13/5_Blorth_c.jpg/revision/latest?cb=20140821110432"});
				deck.push({name:"Collosal Golgor",type:"support",hp:4,dmg:3,den:-1,cd:-1,image:"http://vignette3.wikia.nocookie.net/diablo/images/1/13/5_Blorth_c.jpg/revision/latest?cb=20140821110432"});
				deck.push({name:"Demonic Hellflyer",type:"support",hp:2,dmg:3,den:-1,cd:-1,image:"https://www.diablowiki.net/images/b/b7/Blizzcon2009hellflyer.jpg"});
				deck.push({name:"Demonic Hellflyer",type:"support",hp:2,dmg:3,den:-1,cd:-1,image:"https://www.diablowiki.net/images/b/b7/Blizzcon2009hellflyer.jpg"});

				deck.push({name:"Succubus",type:"support",hp:2,dmg:1,den:-1,cd:-1,image:"https://i.ytimg.com/vi/g3_jpFMwXHc/maxresdefault.jpg"});
				deck.push({name:"Succubus",type:"support",hp:2,dmg:1,den:-1,cd:-1,image:"https://i.ytimg.com/vi/g3_jpFMwXHc/maxresdefault.jpg"});
				deck.push({name:"Siegebreaker Assault Beast",type:"support",hp:6,dmg:4,den:-1,cd:-1,image:"https://www.diabloii.net/gallery/data/580/medium/WWI_08-42.jpg"});
				deck.push({name:"Mallet Lord",type:"support",hp:2,dmg:6,den:-1,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/6/6e/1956a3618f20ccbf0387f01b690e1c5c.jpg/revision/latest?cb=20160120150814"});
				deck.push({name:"Mallet Lord",type:"support",hp:2,dmg:6,den:-1,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/6/6e/1956a3618f20ccbf0387f01b690e1c5c.jpg/revision/latest?cb=20160120150814"});
				deck.push({name:"Terror Demon",type:"support",hp:3,dmg:4,den:-1,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/8/85/Terror_demon.png/revision/latest/scale-to-width-down/180?cb=20170511161529"});
				deck.push({name:"Terror Demon",type:"support",hp:3,dmg:4,den:-1,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/8/85/Terror_demon.png/revision/latest/scale-to-width-down/180?cb=20170511161529"});
				deck.push({name:"Terror Demon",type:"support",hp:3,dmg:4,den:-1,cd:-1,image:"https://vignette1.wikia.nocookie.net/diablo/images/8/85/Terror_demon.png/revision/latest/scale-to-width-down/180?cb=20170511161529"});

				deck.push({name:"Pinnacle of Heaven",type:"arena",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://vignette2.wikia.nocookie.net/diablo/images/2/2d/HH.png/revision/latest?cb=20120601013826"});
				deck.push({name:"Butcher Arena",type:"arena",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://i.ytimg.com/vi/oj_E76Y_oNM/maxresdefault.jpg"});
				deck.push({name:"Heart of Sin",type:"arena",hp:-1,dmg:-1,den:-1,cd:-1,image:"https://www.google.com/search?q=diablo+3+pinnacle+of+heaven&source=lnms&tbm=isch&sa=X&ved=0ahUKEwjo5rG-xrnUAhUBUmMKHfbcDVYQ_AUIDCgD&biw=950&bih=930#tbm=isch&q=diablo+3+heart+of+sin&imgrc=twExNt9mnFrECM:"});
				deck.push({name:"Leoric's Throne Room",type:"arena",hp:-1,dmg:-1,den:-1,cd:-1,image:"http://www.i-mockery.com/blizzcon08/wizard-in-throne-room.jpg"});

				deck.push({name:"Nephalem Rift",type:"trial",hp:14,dmg:-1,den:-1,cd:-1,image:"https://vignette4.wikia.nocookie.net/diablo/images/2/2c/Nephalem_Obelisk.jpg/revision/latest?cb=20140101074501"});
				deck.push({name:"Siege of Bastion's Keep",type:"trial",hp:12,dmg:-1,den:-1,cd:-1,image:"https://i.ytimg.com/vi/RWPHB8zUVQ8/maxresdefault.jpg"});
				deck.push({name:"Cursed Chest",type:"trial",hp:10,dmg:-1,den:-1,cd:-1,image:"http://vignette2.wikia.nocookie.net/diablo/images/f/f9/D3CursedChest.jpg/revision/latest?cb=20140412124017"});
				deck.push({name:"Shrine",type:"trial",hp:-1,dmg:9,den:-1,cd:-1,image:"https://us.battle.net/d3/static/images/game/guide/objects/pylon.jpg?v=58-100"});
				deck.push({name:"Spider Egg",type:"trial",hp:3,dmg:-1,den:-1,cd:-1,image:"http://www.nomarket.org/wp-content/uploads/2014/08/Spider-eggs-on-the-bridge.jpg"});
				deck.push({name:"Blacksmith",type:"trial",hp:8,dmg:-1,den:-1,cd:-1,image:"http://us.battle.net/d3/static/images/artisan/blacksmith/model-character.jpg"});
				deck.push({name:"Black Soulstone",type:"trial",hp:13,dmg:-1,den:-1,cd:-1,image:"https://vignette2.wikia.nocookie.net/diablo/images/b/b8/Black_Soulstone.png/revision/latest?cb=20111024132237"});
				deck.push({name:"Deckard Cain",type:"trial",hp:1,dmg:-1,den:-1,cd:-1,image:"https://vignette2.wikia.nocookie.net/diablo/images/4/4f/Deckard_Cain_D3.jpg/revision/latest?cb=20131015114726"});
			}

			function shuffle(a) {
				var j, x, i;
				for (i = a.length; i; i--) {
					j = Math.floor(Math.random() * i);
					x = a[i - 1];
					a[i - 1] = a[j];
					a[j] = x;
				}
			}

			function deckSelect(){
				var body = document.getElementById("body");
				//Create a text area for them to put in a deck
				var builder = document.createElement("textarea");
				builder.id="deckMaker";
				builder.rows="63";
				builder.cols="45";
				builder.style="position: absolute; left:0px; top:0px; z-index:8;";

				//A button to show when done
				var submit = document.createElement("button");
				submit.id="submit";
				submit.innerHTML="Submit";
				submit.setAttribute("onclick","finalizeDeck()");
				submit.style="position: absolute; left:400px; top:50px; z-index:8;";

				//A drop down to select premade decks
				var dropDown = document.createElement("select");
				dropDown.id="dropDown";
				dropDown.style="position: absolute; left:400px; top:10px; z-index:8;";
				body.appendChild(dropDown);
				for(i=0;i<decks.length;i++){
					var opt = decks[i];
					var el = document.createElement("option");
					el.textContent=opt;
					el.value=opt;
					dropDown.appendChild(el);
				}

				body.appendChild(builder);
				body.appendChild(submit);
			}

			function finalizeDeck(){
				var removal = document.getElementById("deckMaker");
				var dd=document.getElementById("dropDown");
				var text = removal.value;
				//If there is text in the text field assume it is properly formatted and send it up
				if(text.length>2){
					alert("Creating deck");
					createDeck(text);
					removal.parentNode.removeChild(removal);
					removal=document.getElementById("submit");
					removal.parentNode.removeChild(removal);
					dd.parentNode.removeChild(dd);
					setUp=1;
					command=[];
					resizeCanvas();
				}
				//If there is no text and a deck is selected use the selected deck
				else if(dd.value.length>1){
					alert("Selecting "+dd.value);
					chooseDeck(dd.value);
					removal.parentNode.removeChild(removal);
					removal=document.getElementById("submit");
					removal.parentNode.removeChild(removal);
					dd.parentNode.removeChild(dd);
					setUp=1;
					command=[];
					resizeCanvas();
				}
				else{
					alert("Please create or choose a deck");
				}
			}

			window.onkeyup = function(e){
			var key = e.keyCode ? e.keyCode : e.which;
			var object;
			var target;

				//Read key inputs
				//p for place
				if (key == 80) {
					command.push("p");
				}
				//h for hand
				else if(key==72){
					command.push("h");
				}
				//a for arena
				else if(key==65){
					command.push("a");
				}
				//r for reward
				else if(key==82){
					command.push("r");
				}
				//l for leader
				else if(key==76){
					command.push("l");
				}
				//v for vault
				else if(key==86){
					command.push("v");
				}
				//d for dungeon or draw
				else if(key==68){
					command.push("d");
				}
				//s for skill and support
				else if(key==83){
					command.push("s");
				}
				//1
				else if(key==49){
					command.push("1");
				}
				//2
				else if(key==50){
					command.push("2");
				}
				//3
				else if(key==51){
					command.push("3");
				}
				//4
				else if(key==52){
					command.push("4");
				}
				//5
				else if(key==53){
					command.push("5");
				}
				//6
				else if(key==54){
					command.push("6");
				}
				//7
				else if(key==55){
					command.push("7");
				}
				//8
				else if(key==56){
					command.push("8");
				}
				//9
				else if(key==57){
					command.push("9");
				}
				//c for council
				else if(key==67){
					command.push("c");
				}

				//Escape Command
				if(key==27){
					command=[];
				}
				
				if(key==39&&flipped==2){
					var object = deck[0];
					deck.splice(0,1);
					deck.push(object);
				}
				if(key==37&&flipped==2){
					var object = deck.pop();
					deck.splice(0,0,object);
				}
				if(key==39&&flipped==1){
					var object = reward[0];
					reward.splice(0,1);
					reward.push(object);
				}
				if(key==37&&flipped==1){
					var object = reward.pop();
					reward.splice(0,0,object);
				}
				var mark1=0;
				var mark2=0;
				//Press Enter for full command
				if(key==13){
					for(i=0;i<command.length-1;i++){
						if((command[i]=="1"||command[i]=="2"||command[i]=="3"||command[i]=="4"||command[i]=="5"||command[i]=="6"||command[i]=="7"||command[i]=="8"||command[i]=="9")
							&&(command[i+1]=="1"||command[i+1]=="2"||command[i+1]=="3"||command[i+1]=="4"||command[i+1]=="5"||command[i+1]=="6"||command[i+1]=="7"||command[i+1]=="8"||command[i+1]=="9"))
							{
								if(mark1>0){
									mark2=i;
								}
								else{
									mark1=i;
								}

								command[i]=command[i]+command[i+1];
								command.splice(i+1,1);
								i--;
							}
					}

					//Draw
					if(command[0]=="d")
					{
						hand.push(deck.pop());
						console.log(hand[hand.length-1].name);
						console.log(hand[hand.length-1].image);
						console.log(hand[hand.length-1]);
					}
					
					if(command[0]=="f")
					{
						c++
						if(command[c]=="v"){
							flipped=2;
						}
						else if(command[c]=="r"){
							flipped=1;
						}
						else
						{
							flipped=0;
						}
					}
					
					//Place
					if(command[0]=="p"){
						var c=1;
						//object
						var object;
						if(command[c]=="h"){
							console.log("Hand");
							c++;
							object=hand[parseInt(command[c])-1];
							hand.splice(parseInt(command[c])-1,1);
							c++;
						}
						else if(command[c]=="r"){
							console.log("Reward");
							c++;
							object=reward[parseInt(command[c])-1];
							reward.splice(parseInt(command[c])-1,1);
							c++;
						}
						else if(command[c]=="l"){
							console.log("Leader");
							c++;
							if(command[c]=="s"){
								c++
								if(command[c]=="1"){
									c++;
									object=leaderSkills[0];
									leaderSkills[0]={image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""};
								}
								else if(command[c]=="2"){
									c++;
									object=leaderSkills[1];
									leaderSkills[1]={image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""};
								}
								else if(command[c]=="3"){
									c++;
									object=leaderSkills[2];
									leaderSkills[2]={image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""};
								}
							}
							else{
								object=leader;
								leader={image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""};
							}
						}
						else if(command[c]=="a"){
							console.log("Arena");
							c++;
							object=arena;
							arena={image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""};
						}
						else if(command[c]=="d"){
							console.log("Dungeon");
							c++;
							object=dungeon[parseInt(command[c])-1];
							dungeon.splice(parseInt(command[c])-1,1);
							c++;
						}
						else if(command[c]=="s"){
							console.log("Support");
							c++;
							object=support[parseInt(command[c])-1];
							support[parseInt(command[c])-1]={image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""};
							c++;
						}
						else if(command[c]=="v"){
							console.log("Vault");
							c++;
							object=deck[parseInt(command[c])-1];
							deck.splice(parseInt(command[c])-1,1);
							c++;
						}
						else if(command[c]=="c"){
							console.log("Council");
							c++;
							var whichCouncil=0;
							whichCouncil=parseInt(command[c])-1;
							c++
							if(command[c]=="s"){
								c++
								if(command[c]=="1"){
									c++;
									object=councilSkills[whichCouncil*2];
									councilSkills[whichCouncil*2]={image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""};
								}
								else if(command[c]=="2"){
									c++;
									object=councilSkills[whichCouncil*2+1];
									councilSkills[whichCouncil*2+1]={image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""};
								}
							}
							else{
								object=council[whichCouncil];
								council[whichCouncil]={image:"http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png", name:""};
							}
						}
						else{
							alert("Improper format or error in code");
						}

						console.log(command);
						console.log(object.name);
						console.log(object.image);
						console.log(object);

						//target
						if(command[c]=="h"){
							c++;
							if(c==mark1||c==mark2||(command[c]=="1"||command[c]=="2"||command[c]=="3"||command[c]=="4"||command[c]=="5"||command[c]=="6"||command[c]=="7"||command[c]=="8"||command[c]=="9")){
								hand.splice(command[c]-1,0,object);
							}
							else{
								hand.push(object);
							}
						}
						else if(command[c]=="r"){
							c++;
							if(c==mark1||c==mark2||(command[c]=="1"||command[c]=="2"||command[c]=="3"||command[c]=="4"||command[c]=="5"||command[c]=="6"||command[c]=="7"||command[c]=="8"||command[c]=="9")){
								reward.splice(command[c]-1,0,object);
							}
							else{
								reward.push(object);
							}
						}
						else if(command[c]=="l"){
							c++;
							if(command[c]=="s"){
								c++
								if(command[c]=="1"){
									c++;
									leaderSkills[0]=object;
								}
								else if(command[c]=="2"){
									c++;
									leaderSkills[1]=object;
								}
								else if(command[c]=="3"){
									c++;
									leaderSkills[2]=object;
								}
							}
							else{
								c++;
								leader=object;
							}
						}
						else if(command[c]=="a"){
							c++;
							arena=object;
							console.log(arena.image+"    Arena Image");
						}
						else if(command[c]=="d"){
							c++;
							if(c==mark1||c==mark2||(command[c]=="1"||command[c]=="2"||command[c]=="3"||command[c]=="4"||command[c]=="5"||command[c]=="6"||command[c]=="7"||command[c]=="8"||command[c]=="9")){
								dungeon.splice(command[c]-1,0,object);
							}
							else{
								dungeon.push(object);
							}
						}
						else if(command[c]=="s"){
							c++;
							support[parseInt(command[c])-1]=object;
							c++;
						}
						else if(command[c]=="v"){
							c++;
							if(c==mark1||c==mark2||(command[c]=="1"||command[c]=="2"||command[c]=="3"||command[c]=="4"||command[c]=="5"||command[c]=="6"||command[c]=="7"||command[c]=="8"||command[c]=="9")){
								deck.splice(command[c]-1,0,object);
							}
							else{
								deck.push(object);
							}
						}
						else if(command[c]=="c"){
							c++;
							var whichCouncil=0;
							whichCouncil=parseInt(command[c])-1;
							c++
							if(command[c]=="s"){
								c++
								if(command[c]=="1"){
									c++;
									councilSkills[whichCouncil*2+1]=object;
								}
								else if(command[c]=="2"){
									c++;
									councilSkills[whichCouncil*2+2]=object;
								}
							}
							else{
								c++;
								council[whichCouncil]=object;
							}
						}
						else{
							alert("Improper format or error in code");
						}
						c=0;
						mark1=0;
						mark2=0;
					}
					command=[];
					socket.emit('boardUpdate', test, test, test);

					//Shuffle
					if(command[0]=="s"){
						if(command[1]=="v"){
							shuffle(deck);
						}
						else if(command[1]=="r"){
							shuffle(reward);
						}

					}
				}

			}

			function createDeck(text){
				//Send up to the backend for a deck creator and to add to decklist
				shuffle(deck);
				shuffle(reward);
			}

			function chooseDeck(text){
				//Choose the deck with this name
				shuffle(deck);
				shuffle(reward);
			}

			function drawBoard(){
				console.log("Starting drawBoard");
				if(reward.length>0&&flipped!=1){pictures[0].src="https://hydra-media.cursecdn.com/hearthstone.gamepedia.com/thumb/4/4c/Card_back-Pandaria.png/200px-Card_back-Pandaria.png?version=21f7de7534dda27a0df0f9113b27ec68";}
				else if(flipped==1){pictures[0].src=reward.image;}
				pictures[1].src=leader.image;
				pictures[2].src=leaderSkills[0].image;
				pictures[3].src=leaderSkills[1].image;
				pictures[4].src=leaderSkills[2].image;
				pictures[5].src=arena.image;
				if(dungeon.length>0){pictures[6].src=dungeon[dungeon.length-1].image;}
				if(deck.length>0&&flipped!=2){pictures[7].src="https://hydra-media.cursecdn.com/hearthstone.gamepedia.com/thumb/4/4c/Card_back-Pandaria.png/200px-Card_back-Pandaria.png?version=21f7de7534dda27a0df0f9113b27ec68";}
				else if(flipped==2){pictures[7].src=deck[deck.length-1].image;}
				pictures[8].src=support[0].image;
				pictures[9].src=support[1].image;
				pictures[10].src=support[2].image;
				pictures[11].src=support[3].image;
				pictures[12].src=council[0].image;
				pictures[13].src=councilSkills[0].image;
				pictures[14].src=councilSkills[1].image;
				pictures[15].src=council[1].image;
				pictures[16].src=councilSkills[2].image;
				pictures[17].src=councilSkills[3].image;
				pictures[18].src=council[2].image;
				pictures[19].src=councilSkills[4].image;
				pictures[20].src=councilSkills[5].image;
				pictures[21].src=council[3].image;
				pictures[22].src=councilSkills[6].image;
				pictures[23].src=councilSkills[7].image;

				if(enemyArea[0].length>0){pictures[24].src="https://hydra-media.cursecdn.com/hearthstone.gamepedia.com/thumb/4/4c/Card_back-Pandaria.png/200px-Card_back-Pandaria.png?version=21f7de7534dda27a0df0f9113b27ec68";}
				pictures[25].src=enemyArea[1].image;
				pictures[26].src=enemyArea[2][0].image;
				pictures[27].src=enemyArea[2][1].image;
				pictures[28].src=enemyArea[2][2].image;
				pictures[29].src=enemyArea[3].image;
				if(enemyArea[4].length>0){pictures[30].src=enemyArea[4][enemyArea[4].length-1].image;}
				if(enemyArea[6].length>0){pictures[31].src="https://hydra-media.cursecdn.com/hearthstone.gamepedia.com/thumb/4/4c/Card_back-Pandaria.png/200px-Card_back-Pandaria.png?version=21f7de7534dda27a0df0f9113b27ec68";}
				pictures[32].src=enemyArea[5][0].image;
				pictures[33].src=enemyArea[5][1].image;
				pictures[34].src=enemyArea[5][2].image;
				pictures[35].src=enemyArea[5][3].image;
				pictures[36].src=enemyArea[7][0].image;
				pictures[37].src=enemyArea[8][0].image;
				pictures[38].src=enemyArea[8][1].image;
				pictures[39].src=enemyArea[7][1].image;
				pictures[40].src=enemyArea[8][2].image;
				pictures[41].src=enemyArea[8][3].image;
				pictures[42].src=enemyArea[7][2].image;
				pictures[43].src=enemyArea[8][4].image;
				pictures[44].src=enemyArea[8][5].image;
				pictures[45].src=enemyArea[7][3].image;
				pictures[46].src=enemyArea[8][6].image;
				pictures[47].src=enemyArea[8][7].image;
				//var picture = document.getElementById("leader1");
				//picture.src="newsrc.png";
				//var picture = document.getElementById("leader1");
				//picture.src = "leader1.png";
				//Sends up the client side board and then gets the board form the server
				//Changes the src of the images it needs to
			}

			function selectLeader(){
				var choice;
				var body= document.getElementById("body");
				for(i=0;i<heroes.length;i++){
					choice = document.createElement("img");
					choice.id=i;
					choice.width=cw*2;
					choice.height=ch*2;
					choice.class="rotate0";
					choice.src=heroes[i].image;
					choice.style="position: absolute; left:15px; top:-15px; z-index:3;";
					choice.style.top=s+"px";
					choice.style.left=cw*2.5*i+"px";
					choice.alt=heroes[i].name;
					choice.setAttribute("onclick","leaderChoice(this)");
					imgHeroes.push(choice);
					body.appendChild(choice);
				}
				//Get the list of heroes and place those five pictures
				//Make that the leader and put the rest in the council
			}

			function leaderChoice(choice){
				leader=heroes[choice.id];
				for(i=0;i<heroes.length;i++){
					if(choice.id==i){
					}
					else{
						council.push(heroes[i]);
					}
				}
				for(i=0;i<imgHeroes.length;i++){
						imgHeroes[i].parentNode.removeChild(imgHeroes[i]);
				}
				setUp=2;
				resizeCanvas();
			}

			(function() {
			   // Start listening to resize events and draw canvas.
			   initialize();
				function initialize() {

					////Need to add a function here to get at least the decks////

				   // Register an event listener to call the resizeCanvas() function
				   // each time the window is resized.
				   window.addEventListener('resize', resizeCanvas, false);
				   // Draw canvas border for the first time.
				   pictures.forEach(clearPictures);
				   dummyDeck();
				   resizeCanvas();
				   drawElapsedTime();
				}

				// Runs each time the DOM window resize event fires.
				// Resets the canvas dimensions to match window,
				// then draws the new borders accordingly.
				function resizeCanvas() {
						bw = window.innerWidth;
						bh = window.innerHeight;
						//if((bh*3)>(bw*2)){
							cw = bw/16;
							ch = cw*10/7;
							s=ch/7;
						//}
						//else if((bw*2)>(bh*3)){
						//	ch = bh/10;
						//	cw = ch*7/10;
						//	s=ch/6;
						//}
						c.font="12px Georgia";
						theCanvas.width=bw;
						theCanvas.height=bh;
						d = (ch-cw)/2;
						redraw();
					}
				})();

				function resizePictures(item){
					item.width=cw;
					item.height=ch;
				}

				function clearPictures(item){
					item.src="http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png";
					//item.src="https://hydra-media.cursecdn.com/hearthstone.gamepedia.com/thumb/4/4c/Card_back-Pandaria.png/200px-Card_back-Pandaria.png?version=21f7de7534dda27a0df0f9113b27ec68";
				}

				function drawPictures(){
					for(i=0;i<imgHand.length;i++){
						imgHand[i].parentNode.removeChild(imgHand[i]);
					}
					imgHand=[];
					if(setUp>1){
						console.log("Going to drawHand");
						drawHand();
						console.log("Going to drawBoard");
						drawBoard();
						console.log("Done with drawBoard");
					}
				}

				function drawHand(){
					for(var i=0;i<hand.length;i++){
					console.log("");
					console.log(hand[i].name);
					console.log(hand[i].image);
					console.log("");
						var img = document.createElement("img");
						img.id="hand"+i+"";
						img.setAttribute("onclick","zoomIn(this)");
						img.width=cw;
						img.height=ch;
						img.class="rotate0";
						img.src=hand[i].image;
						img.style="position: absolute; left:15px; top:-15px; z-index:3;";
						img.alt="hand";
						imgHand.push(img);
						var source=document.getElementById("body");
						source.appendChild(img);
					}
				}

				function placeHand(){
					if(imgHand.length>8){
						for(i=0;i<imgHand.length;i++){
							imgHand[i].style.top=((s*5.5)+(ch*3))+"px";
							imgHand[i].style.left=(i*(cw*8)/imgHand.length)+"px";
						}
					}
					else if(imgHand.length<8){
						var leftMost = cw*4-cw*imgHand.length/2;
						var current = leftMost;
						for(i=0;i<imgHand.length;i++){
							imgHand[i].style.top=((s*5.5)+(ch*3))+"px";
							imgHand[i].style.left=current+"px";
							current=current+cw;
						}
					}
					else{
						for(i=0;i<imgHand.length;i++){
							imgHand[i].style.top=((s*5.5)+(ch*3))+"px";
							imgHand[i].style.left=(i*cw)+"px";
						}
					}
				}

				function placePictures(){
					//Player 1 Area
					var placer = document.getElementById("reward1");
					placer.style.left=s+d+"px";
					placer.style.top=s-d+"px";

					placer = document.getElementById("leader1");
					placer.style.left=((s*2.5)+ch)+"px";
					placer.style.top=s+"px";

					placer = document.getElementById("leader1s1");
					placer.style.left=((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s-d+"px";

					placer = document.getElementById("leader1s2");
					placer.style.left=((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s+(cw*1/5)-d+"px";

					placer = document.getElementById("leader1s3");
					placer.style.left=((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s+(cw*2/5)-d+"px";

					placer = document.getElementById("arena1");
					placer.style.left=((s*7)+ch+cw+(ch/2))+d+"px";
					placer.style.top=(s-d)+"px";

					placer = document.getElementById("dungeon1");
					placer.style.left=(cw*6+s*4)+"px";
					placer.style.top=s+"px";

					placer = document.getElementById("vault1");
					placer.style.left=(cw*6+s*4)+"px";
					placer.style.top=((s*2)+ch)+"px";

					placer = document.getElementById("support1a");
					placer.style.left=(s*1.5)+"px";
					placer.style.top=((s*2)+ch)+"px";

					placer = document.getElementById("support1b");
					placer.style.left=(s*2.5)+(cw)+"px";
					placer.style.top=((s*2)+ch)+"px";

					placer = document.getElementById("support1c");
					placer.style.left=(s*3.5)+(cw*2)+"px";
					placer.style.top=((s*2)+ch)+"px";

					placer = document.getElementById("support1d");
					placer.style.left=(s*4.5)+(cw*3)+"px";
					placer.style.top=((s*2)+ch)+"px";

					placer = document.getElementById("council1a");
					placer.style.left=(s*1.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";

					placer = document.getElementById("council1as1");
					placer.style.left=(s*1.5)+(cw-ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";

					placer = document.getElementById("council1as2");
					placer.style.left=(s*1.5)+(cw-ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";

					placer = document.getElementById("council1b");
					placer.style.left=(s*2.5)+(cw*1+ch*.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";

					placer = document.getElementById("council1bs1");
					placer.style.left=(s*2.5)+(cw*2)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";

					placer = document.getElementById("council1bs2");
					placer.style.left=(s*2.5)+(cw*2)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";

					placer = document.getElementById("council1c");
					placer.style.left=(s*3.5)+(cw*2+ch)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";

					placer = document.getElementById("council1cs1");
					placer.style.left=(s*3.5)+(cw*3+ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";

					placer = document.getElementById("council1cs2");
					placer.style.left=(s*3.5)+(cw*3+ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";

					placer = document.getElementById("council1d");
					placer.style.left=(s*4.5)+(cw*3+ch*1.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";

					placer = document.getElementById("council1ds1");
					placer.style.left=(s*4.5)+(cw*4+ch)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";

					placer = document.getElementById("council1ds2");
					placer.style.left=(s*4.5)+(cw*4+ch)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";

					//Player 2 area
					placer = document.getElementById("reward2");
					placer.style.left=(bw/2)+s+d+"px";
					placer.style.top=s-d+"px";

					placer = document.getElementById("leader2");
					placer.style.left=(bw/2)+((s*2.5)+ch)+"px";
					placer.style.top=s+"px";

					placer = document.getElementById("leader2s1");
					placer.style.left=(bw/2)+((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s-d+"px";

					placer = document.getElementById("leader2s2");
					placer.style.left=(bw/2)+((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s+(cw*1/5)-d+"px";

					placer = document.getElementById("leader2s3");
					placer.style.left=(bw/2)+((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s+(cw*2/5)-d+"px";

					placer = document.getElementById("arena2");
					placer.style.left=(bw/2)+((s*7)+ch+cw+(ch/2))+d+"px";
					placer.style.top=(s-d)+"px";

					placer = document.getElementById("dungeon2");
					placer.style.left=(bw/2)+(cw*6+s*4)+"px";
					placer.style.top=s+"px";

					placer = document.getElementById("vault2");
					placer.style.left=(bw/2)+(cw*6+s*4)+"px";
					placer.style.top=((s*2)+ch)+"px";

					placer = document.getElementById("support2a");
					placer.style.left=(bw/2)+(s*1.5)+"px";
					placer.style.top=((s*2)+ch)+"px";

					placer = document.getElementById("support2b");
					placer.style.left=(bw/2)+(s*2.5)+(cw)+"px";
					placer.style.top=((s*2)+ch)+"px";

					placer = document.getElementById("support2c");
					placer.style.left=(bw/2)+(s*3.5)+(cw*2)+"px";
					placer.style.top=((s*2)+ch)+"px";

					placer = document.getElementById("support2d");
					placer.style.left=(bw/2)+(s*4.5)+(cw*3)+"px";
					placer.style.top=((s*2)+ch)+"px";

					placer = document.getElementById("council2a");
					placer.style.left=(bw/2)+(s*1.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";

					placer = document.getElementById("council2as1");
					placer.style.left=(bw/2)+(s*1.5)+(cw-ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";

					placer = document.getElementById("council2as2");
					placer.style.left=(bw/2)+(s*1.5)+(cw-ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";

					placer = document.getElementById("council2b");
					placer.style.left=(bw/2)+(s*2.5)+(cw*1+ch*.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";

					placer = document.getElementById("council2bs1");
					placer.style.left=(bw/2)+(s*2.5)+(cw*2)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";

					placer = document.getElementById("council2bs2");
					placer.style.left=(bw/2)+(s*2.5)+(cw*2)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";

					placer = document.getElementById("council2c");
					placer.style.left=(bw/2)+(s*3.5)+(cw*2+ch)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";

					placer = document.getElementById("council2cs1");
					placer.style.left=(bw/2)+(s*3.5)+(cw*3+ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";

					placer = document.getElementById("council2cs2");
					placer.style.left=(bw/2)+(s*3.5)+(cw*3+ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";

					placer = document.getElementById("council2d");
					placer.style.left=(bw/2)+(s*4.5)+(cw*3+ch*1.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";

					placer = document.getElementById("council2ds1");
					placer.style.left=(bw/2)+(s*4.5)+(cw*4+ch)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";

					placer = document.getElementById("council2ds2");
					placer.style.left=(bw/2)+(s*4.5)+(cw*4+ch)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";

					//Hand
					placeHand();
				}

				function redraw(){
					//Board
						//Background
						c.fillStyle="grey";
						c.fillRect(0,0,bw*2,bh*2);

						c.fillStyle="blue";
						c.fillRect(0,0,bw/2,bh);
						c.fillStyle="red";
						c.fillRect((bw/2)+1,0,bw/2,bh);

						//Player 1
						c.fillStyle="black";
						c.fillRect(((s*7)+ch+cw+(ch/2)),s,ch,cw);
						c.fillStyle="white";
						c.fillText("Arena", ((s*6)+22+ch+cw+(ch/2)), s+12);
						c.fillStyle="black";
						c.fillRect(s,(s),ch,cw);
						c.fillStyle="white";
						c.fillText("Reward Deck", s+15, ((s*2)+10));
						c.fillStyle="black";
						c.fillRect(((s*2)+ch), (s), ((s*2)+cw+(ch/2)),ch);
						c.fillStyle="white";
						c.fillText("Leader Area", ((s*2)+10+ch), (s+15));
						c.fillStyle="black";
						c.fillRect((cw*6+s*4),(s),cw,ch);
						c.fillRect(s, ((s*1.5)+ch), ((cw*4)+(s*4)), (s+ch));
						c.fillRect((cw*6+s*4),((s*2)+ch),cw,ch);
						c.fillRect(s, ((s*3)+(ch*2)), ((cw*4)+(ch*2)+(s*4)), (s+ch));
						c.fillStyle="white";
						c.fillText("Dungeon", (cw*6+s*4+5),(s+12));
						c.fillText("Support Area", s+12, ((s*1.5)+ch+12));
						c.fillText("Vault", (cw*6+s*4+5),((s*2)+ch+12));
						c.fillText("Council", s+12, ((s*3)+(ch*2)+12));

						//Player 2
						c.fillStyle="black";
						c.fillRect(((s*7)+ch+cw+(ch/2))+(bw/2),s,ch,cw);
						c.fillStyle="white";
						c.fillText("Arena", ((s*6)+22+ch+cw+(ch/2))+(bw/2), s+12);
						c.fillStyle="black";
						c.fillRect(s+(bw/2),(s),ch,cw);
						c.fillStyle="white";
						c.fillText("Reward Deck", s+15+(bw/2), ((s*2)+10));
						c.fillStyle="black";
						c.fillRect(((s*2)+ch)+(bw/2), (s), ((s*2)+cw+(ch/2)),ch);
						c.fillStyle="white";
						c.fillText("Leader Area", ((s*2)+10+ch)+(bw/2), (s+15));
						c.fillStyle="black";
						c.fillRect((cw*6+s*4)+(bw/2),(s),cw,ch);
						c.fillRect(s+(bw/2), ((s*1.5)+ch), ((cw*4)+(s*4)), (s+ch));
						c.fillRect((cw*6+s*4)+(bw/2),((s*2)+ch),cw,ch);
						c.fillRect(s+(bw/2), ((s*3)+(ch*2)), ((cw*4)+(ch*2)+(s*4)), (s+ch));
						c.fillStyle="white";
						c.fillText("Dungeon", (cw*6+s*4+5)+(bw/2),(s+12));
						c.fillText("Support Area", s+12+(bw/2), ((s*1.5)+ch+12));
						c.fillText("Vault", (cw*6+s*4+5)+(bw/2),((s*2)+ch+12));
						c.fillText("Council", s+12+(bw/2), ((s*3)+(ch*2)+12));

						//Hand
						c.fillStyle="black";
						c.fillRect(0, ((s*5)+(ch*3)), (cw*8), (s+ch));
						c.fillStyle="white";
						c.fillText("Hand", 12, ((s*5)+(ch*3)+12));

					//Phase
					c.fillStyle="green";
					c.fillRect(s*18+(bw/2), ((s*9)+(ch*3)), s*20, (s*4));
					c.fillStyle="yellow";
					c.fillRect(s*18+(bw/2)+(s*4*(currentPhase-1)), ((s*9)+(ch*3)), s*4, (s*4))

					//Timer
					c.fillStyle="black";
					c.fillRect(s*18+(bw/2), ((s*5)+(ch*3)), s*20, (s*4));

					//pictures.forEach(clearPictures);
					drawPictures();
					console.log("Entering resize");
					pictures.forEach(resizePictures);
					console.log("Entering placePictures");
					placePictures();
					console.log("Done with placePictures");

					//Command
					c.font="24px Georgia";
					c.fillText(command,cw*8.5,ch*3+s*10);

					if(setUp<2){
						c.fillStyle="grey";
						c.fillRect(0,0,bw,bh);
						if(setUp<1){
							deckSelect();
						}
						else{
							selectLeader();
						}
					}
					console.log("Done with redraw");
				}

				function getMousePos(theCanvas, event) {
					var rect = theCanvas.getBoundingClientRect();
					return {
						x: event.clientX - rect.left,
						y: event.clientY - rect.top
					};
				}
				function isInside(pos, rect){
					return pos.x > rect.x && pos.x < rect.x+rect.width && pos.y < rect.y+rect.height && pos.y > rect.y
				}

				var rect = [{
					x:s*18+(bw/2),
					y:((s*5)+(ch*3)),
					width:s*20,
					height:(s*4)
				},
					{
					x:s*18+(bw/2),
					y:((s*9)+(ch*3)),
					width:s*4,
					height:(s*4)
				},
					{
					x:s*18+(bw/2)+(s*4),
					y:((s*9)+(ch*3)),
					width:s*4,
					height:(s*4)
				},
					{
					x:s*18+(bw/2)+(s*4*2),
					y:((s*9)+(ch*3)),
					width:s*4,
					height:(s*4)
				},
					{
					x:s*18+(bw/2)+(s*4*3),
					y:((s*9)+(ch*3)),
					width:s*4,
					height:(s*4)
				},
					{
					x:s*18+(bw/2)+(s*4*4),
					y:((s*9)+(ch*3)),
					width:s*4,
					height:(s*4)
				}];

				theCanvas.addEventListener('click', function(evt) {
					var mousePos = getMousePos(theCanvas, evt);

					if (isInside(mousePos,rect[0])) {
						if(paused<1){
							alert('Pausing Timer');
							pauseTimer();
							paused=1;
						}
						else{
							alert('Resuming Timer');
							resumeTimer();
							paused=0;
						}
					}
					else if(isInside(mousePos,rect[1])){
						alert('Changing to Judgement Phase');
						currentPhase=1;
					}
					else if(isInside(mousePos,rect[2])){
						alert('Changing to Draw Phase');
						currentPhase=2;
					}
					else if(isInside(mousePos,rect[3])){
						alert('Changing to Tactics Phase');
						currentPhase=3;
					}
					else if(isInside(mousePos,rect[4])){
						alert('Changing to Brawl Phase');
						currentPhase=4;
					}
					else if(isInside(mousePos,rect[5])){
						alert('Changing to End Phase');
						currentPhase=5;
					}
					socket.emit('phaseIndicator', currentPhase);
				});

				function pauseTimer(){
					window.clearInterval(trueTime)
				}

				function resumeTimer(){
					trueTime=setInterval(function(){
						time++;
						if(time>59){
							minutes=minutes+1;
							time=time-60;
						}
						playerArea=[reward,leader,leaderSkills,arena,dungeon,support,deck,council,councilSkills];
						socket.emit('boardUpdate', playerArea);
						redraw();
						console.log("Entering drawElapsedTime");
						drawElapsedTime();
						console.log("done with drawElapsedTime");},1000)
				}

				function drawElapsedTime(){
					c.fillStyle="white";
					c.font="26px Georgia";
					c.fillText(minutes+":"+time,s*25+(bw/2), ((s*8)+(ch*3)));
					c.font="12px Georgia";
				}

				var modalImg = document.getElementById("img01");
				function zoomIn(x){
					modal.style.display = "block";
					modalImg.src = x.src;
					captionText.innerHTML = x.alt;
				}

				// Get the <span> element that closes the modal
				var span = document.getElementsByClassName("close")[0];

				// When the user clicks on <span> (x), close the modal
				span.onclick = function() {
					modal.style.display = "none";
				}
		</script>
	</body>
</html>
