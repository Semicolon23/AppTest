<!DOCTYPE html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="socket.io/socket.io.js"></script>
		<script>
		//Colin's Section
		var socket = io().connect('http://localhost:5000');



		</script>
		<style>
		.modal {
			display: none; /* Hidden by default */
			position: fixed; /* Stay in place */
			z-index: 7; /* Sit on top */
			padding-top: 100px; /* Location of the box */
			left: 0;
			top: 0;
			width: 100%; /* Full width */
			height: 100%; /* Full height */
			overflow: auto; /* Enable scroll if needed */
			background-color: rgb(0,0,0); /* Fallback color */
			background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
		}

		/* Modal Content (image) */
		.modal-content {
			margin: auto;
			display: block;
			width: 80%;
			max-width: 700px;
		}

		/* Caption of Modal Image */
		#caption {
			margin: auto;
			display: block;
			width: 80%;
			max-width: 700px;
			text-align: center;
			color: #ccc;
			padding: 10px 0;
			height: 150px;
		}

		/* Add Animation */
		.modal-content, #caption {    
			-webkit-animation-name: zoom;
			-webkit-animation-duration: 0.6s;
			animation-name: zoom;
			animation-duration: 0.6s;
		}

		@-webkit-keyframes zoom {
			from {-webkit-transform:scale(0)} 
			to {-webkit-transform:scale(1)}
		}

		@keyframes zoom {
			from {transform:scale(0)} 
			to {transform:scale(1)}
		}

		/* The Close Button */
		.close {
			position: absolute;
			top: 15px;
			right: 35px;
			color: #f1f1f1;
			font-size: 40px;
			font-weight: bold;
			transition: 0.3s;
		}

		.close:hover,
		.close:focus {
			color: #bbb;
			text-decoration: none;
			cursor: pointer;
		}

		/* 100% Image Width on Smaller Screens */
		@media only screen and (max-width: 700px){
			.modal-content {
				width: 100%;
			}
		}
		
		.rotate90 {
			-webkit-transform: rotate(90deg);
			-moz-transform: rotate(90deg);
			-o-transform: rotate(90deg);
			-ms-transform: rotate(90deg);
			transform: rotate(90deg);
		}
		.rotate0 {
			-webkit-transform: rotate(0deg);
			-moz-transform: rotate(0deg);
			-o-transform: rotate(0deg);
			-ms-transform: rotate(0deg);
			transform: rotate(0deg);
		}
		body {background-color: grey;}
		</style>
		<img id="back" width="70" height="100" src="CardBack.png" alt="Card Back">
	</head>
	<body id="body" style="margin: 0px; overflow: hidden">
		<canvas id="myCanvas" width="800" height="930" style="position: absolute; left:0px; top:0px; z-index:1;"></canvas>
		<img id="reward1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="reward" >
		<img id="leader1" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:6;" alt="leader" >
		<img id="leader1s1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="skill" >
		<img id="leader1s2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="leader1s3" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="arena1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="arena" >
		<img id="dungeon1" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="dungeon" >
		<img id="vault1" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="vault" >
		<img id="support1a" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support1b" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support1c" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support1d" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="council1a" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council1as1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council1as2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council1b" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council1bs1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council1bs2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council1c" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council1cs1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council1cs2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council1d" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council1ds1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council1ds2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		
		<img id="reward2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="reward" >
		<img id="leader2" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:6;" alt="leader" >
		<img id="leader2s1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="skill" >
		<img id="leader2s2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="leader2s3" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="arena2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="arena" >
		<img id="dungeon2" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="dungeon" >
		<img id="vault2" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="vault" >
		<img id="support2a" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support2b" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support2c" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="support2d" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="support" >
		<img id="council2a" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council2as1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council2as2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council2b" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council2bs1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council2bs2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council2c" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council2cs1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council2cs2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		<img id="council2d" onclick="zoomIn(this)" width="70" height="100" class="rotate0" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:5;" alt="council" >
		<img id="council2ds1" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:4;" alt="skill" >
		<img id="council2ds2" onclick="zoomIn(this)" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="skill" >
		
		<div id="myModal" class="modal">
		  <span class="close">&times;</span>
		  <img class="modal-content" id="img01">
		  <div id="caption"></div>
		</div>
		
		<script>
			var modal = document.getElementById('myModal');
			var theCanvas = document.getElementById("myCanvas"),
				c = theCanvas.getContext("2d"),
				cardHeight=100, cardWidth=75, boardWidth=window.innerWidth, boardHeight=window.innerHeight, spacing=25,
				ch=cardHeight, cw=cardWidth, bw=boardWidth, bh=boardHeight, s=spacing;
			var currentPhase=1;
			var paused=1;
			var trueTime;
			var time=0;
			var minutes=0;
			//Card displacement for rotated cards
			var d = (ch-cw)/2;
			var hand=["https://www.cvknowhow.com/careers/wp-content/uploads/2015/03/Superhero-Leader-JPG-700x642.jpg","https://www.cesarsway.com/sites/newcesarsway/files/styles/large_article_preview/public/Common-dog-behaviors-explained.jpg?itok=FSzwbBoi","http://nolimitssportsandfitness.com/wp-content/uploads/sites/9/2016/03/Spartan.jpg"];
			var imgHand=[];
			var heroes=["Bill","Bob","Beau","Brad","Bart"];
			var imgHeroes=[];
			var leader;
			var council=[];
			var setUp = 0;
			var decks=[];
			var arena;
			var support=[];
			var councilSkills=[];
			
			//Keep track of all the images
			var pictures = [document.getElementById("reward1"),document.getElementById("leader1"),
					document.getElementById("leader1s1"),document.getElementById("leader1s2"),
					document.getElementById("leader1s3"),document.getElementById("arena1"),
					document.getElementById("dungeon1"),document.getElementById("vault1"),
					document.getElementById("support1a"),document.getElementById("support1b"),
					document.getElementById("support1c"),document.getElementById("support1d"),
					document.getElementById("council1a"),document.getElementById("council1as1"),
					document.getElementById("council1as2"),document.getElementById("council1b"),
					document.getElementById("council1bs1"),document.getElementById("council1bs2"),
					document.getElementById("council1c"),document.getElementById("council1cs1"),
					document.getElementById("council1cs2"), document.getElementById("council1d"),
					document.getElementById("council1ds1"), document.getElementById("council1ds2"),
					document.getElementById("reward2"),document.getElementById("leader2"),
					document.getElementById("leader2s1"),document.getElementById("leader2s2"),
					document.getElementById("leader2s3"),document.getElementById("arena2"),
					document.getElementById("dungeon2"),document.getElementById("vault2"),
					document.getElementById("support2a"),document.getElementById("support2b"),
					document.getElementById("support2c"),document.getElementById("support2d"),
					document.getElementById("council2a"),document.getElementById("council2as1"),
					document.getElementById("council2as2"),document.getElementById("council2b"),
					document.getElementById("council2bs1"),document.getElementById("council2bs2"),
					document.getElementById("council2c"),document.getElementById("council2cs1"),
					document.getElementById("council2cs2"), document.getElementById("council2d"),
					document.getElementById("council2ds1"), document.getElementById("council2ds2")];
			
			function deckSelect(){
				var body = document.getElementById("body");
				//Create a text area for them to put in a deck
				var builder = document.createElement("textarea");
				builder.id="deckMaker";
				builder.rows="63";
				builder.cols="45";
				builder.style="position: absolute; left:0px; top:0px; z-index:8;";
				
				//A button to show when done
				var submit = document.createElement("button");
				submit.id="submit";
				submit.innerHTML="Submit";
				submit.setAttribute("onclick","finalizeDeck()"); 
				submit.style="position: absolute; left:400px; top:50px; z-index:8;";
				
				//A drop down to select premade decks
				var dropDown = document.createElement("select");
				dropDown.id="dropDown";
				dropDown.style="position: absolute; left:400px; top:10px; z-index:8;";
				body.appendChild(dropDown);
				for(i=0;i<decks.length;i++){
					var opt = decks[i];
					var el = document.createElement("option");
					el.textContent=opt;
					el.value=opt;
					dropDown.appendChild(el);
				}
				
				body.appendChild(builder);
				body.appendChild(submit);
			}
			
			function finalizeDeck(){
				var removal = document.getElementById("deckMaker");
				var dd=document.getElementById("dropDown");
				var text = removal.value;
				//If there is text in the text field assume it is properly formatted and send it up
				if(text.length>2){
					alert("Creating deck");
					createDeck(text);
					removal.parentNode.removeChild(removal);
					removal=document.getElementById("submit");
					removal.parentNode.removeChild(removal);
					dd.parentNode.removeChild(dd);
					setUp=1;
					resizeCanvas();
				}
				//If there is no text and a deck is selected use the selected deck
				else if(dd.value.length>1){
					alert("Selecting "+dd.value);
					chooseDeck(dd.value);
					removal.parentNode.removeChild(removal);
					removal=document.getElementById("submit");
					removal.parentNode.removeChild(removal);
					dd.parentNode.removeChild(dd);
					setUp=1;
					resizeCanvas();
				}
				else{
					alert("Please create or choose a deck");
				}
			}
			
			window.onkeyup = function(e){
			var key = e.keyCode ? e.keyCode : e.which;
			var object;
			var target;
			
				if (key == 49) {
					object=hand.splice(0,1);
					target = document.getElementById("support1a");
					target.src=object;
				}
				else if(key == 50){
					object=hand.splice(1,1);
					target = document.getElementById("council1b");
					target.src=object;
				}
				else if(key == 51){
					object=hand.splice(2,1);
					target = document.getElementById("council1bs1");
					target.src=object;
				}
       
			}
			
			function createDeck(text){
				//Send up to the backend for a deck creator and to add to decklist
			}
			
			function chooseDeck(text){
				//Choose the deck with this name
			}
			
			function drawBoard(){
				//var picture = document.getElementById("leader1");
				//picture.src="newsrc.png";
				//Sends up the client side board and then gets the board form the server
				//Changes the src of the images it needs to
			}
			
			function selectLeader(){
				var choice;
				var body= document.getElementById("body");
				for(i=0;i<heroes.length;i++){
					choice = document.createElement("img");
					choice.id="hero"+i+"";
					choice.width=cw*2; 
					choice.height=ch*2;
					choice.class="rotate0"; 
					choice.src="https://hydra-media.cursecdn.com/hearthstone.gamepedia.com/thumb/4/4c/Card_back-Pandaria.png/200px-Card_back-Pandaria.png?version=21f7de7534dda27a0df0f9113b27ec68";
					choice.style="position: absolute; left:15px; top:-15px; z-index:3;"; 
					choice.style.top=s+"px";
					choice.style.left=cw*2.5*i+"px";
					choice.alt=heroes[i];
					choice.setAttribute("onclick","leaderChoice(this)");
					imgHeroes.push(choice);
					body.appendChild(choice);
				}
				//Get the list of heroes and place those five pictures 
				//Make that the leader and put the rest in the council
			}
			
			function leaderChoice(choice){
				leader=choice.alt;
				for(i=0;i<heroes.length;i++){
					if(heroes[i].localeCompare(leader)==0){
					}
					else{
						council.push(heroes[i]);
					}
				}
				for(i=0;i<imgHeroes.length;i++){
						imgHeroes[i].parentNode.removeChild(imgHeroes[i]);
					}
				setUp=2;
				resizeCanvas();
			}
			
			(function() {
			   // Start listening to resize events and draw canvas.
			   initialize();
				function initialize() {
				
					////Need to add a function here to get at least the decks////
					
				   // Register an event listener to call the resizeCanvas() function 
				   // each time the window is resized.
				   window.addEventListener('resize', resizeCanvas, false);
				   // Draw canvas border for the first time.
				   resizeCanvas();
				   drawElapsedTime();
				}
				
				// Runs each time the DOM window resize event fires.
				// Resets the canvas dimensions to match window,
				// then draws the new borders accordingly.
				function resizeCanvas() {
						bw = window.innerWidth;
						bh = window.innerHeight;
						//if((bh*3)>(bw*2)){
							cw = bw/16;
							ch = cw*10/7;
							s=ch/7;
						//}
						//else if((bw*2)>(bh*3)){
						//	ch = bh/10;
						//	cw = ch*7/10;
						//	s=ch/6;
						//}
						c.font="12px Georgia";
						theCanvas.width=bw;
						theCanvas.height=bh;
						d = (ch-cw)/2;
						redraw();
					}
				})();
				
				function resizePictures(item){
					item.width=cw;
					item.height=ch;
				}
				
				function clearPictures(item){
					//item.src="http://pinktiger.com/janscustomcrystals/wp-content/themes/pinktiger/image/patterns/transparent/p51.png";
					//item.src="https://hydra-media.cursecdn.com/hearthstone.gamepedia.com/thumb/4/4c/Card_back-Pandaria.png/200px-Card_back-Pandaria.png?version=21f7de7534dda27a0df0f9113b27ec68";
				}
				
				function drawPictures(){
					for(i=0;i<imgHand.length;i++){
						imgHand[i].parentNode.removeChild(imgHand[i]);
					}
					imgHand=[];
					drawHand();
					drawBoard();
				}
				
				function drawHand(){
					for(var i=0;i<hand.length;i++){
						var img = document.createElement("img");
						img.id="hand"+i+"";
						img.setAttribute("onclick","zoomIn(this)"); 
						img.width=cw; 
						img.height=ch;
						img.class="rotate0"; 
						img.src=hand[i];
						img.style="position: absolute; left:15px; top:-15px; z-index:3;"; 
						img.alt="hand";
						imgHand.push(img);
						var source=document.getElementById("body");
						source.appendChild(img);
					}
				}
				
				function placeHand(){
					if(imgHand.length>8){
						for(i=0;i<imgHand.length;i++){
							imgHand[i].style.top=((s*5.5)+(ch*3))+"px";
							imgHand[i].style.left=(i*(cw*8)/imgHand.length)+"px";
						}
					}
					else if(imgHand.length<8){
						var leftMost = cw*4-cw*imgHand.length/2;
						var current = leftMost;
						for(i=0;i<imgHand.length;i++){
							imgHand[i].style.top=((s*5.5)+(ch*3))+"px";
							imgHand[i].style.left=current+"px";
							current=current+cw;
						}
					}
					else{
						for(i=0;i<imgHand.length;i++){
							imgHand[i].style.top=((s*5.5)+(ch*3))+"px";
							imgHand[i].style.left=(i*cw)+"px";
						}
					}
				}
				
				function placePictures(){
					//Player 1 Area
					var placer = document.getElementById("reward1"); 
					placer.style.left=s+d+"px";
					placer.style.top=s-d+"px";
					
					placer = document.getElementById("leader1");
					placer.style.left=((s*2.5)+ch)+"px";
					placer.style.top=s+"px";
					
					placer = document.getElementById("leader1s1");
					placer.style.left=((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s-d+"px";
					
					placer = document.getElementById("leader1s2");
					placer.style.left=((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s+(cw*1/5)-d+"px";
					
					placer = document.getElementById("leader1s3");
					placer.style.left=((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s+(cw*2/5)-d+"px";
					
					placer = document.getElementById("arena1");
					placer.style.left=((s*7)+ch+cw+(ch/2))+d+"px";
					placer.style.top=(s-d)+"px";
					
					placer = document.getElementById("dungeon1"); 
					placer.style.left=(cw*6+s*4)+"px";
					placer.style.top=s+"px";
					
					placer = document.getElementById("vault1");
					placer.style.left=(cw*6+s*4)+"px";
					placer.style.top=((s*2)+ch)+"px";
					
					placer = document.getElementById("support1a"); 
					placer.style.left=(s*1.5)+"px";
					placer.style.top=((s*2)+ch)+"px";
					
					placer = document.getElementById("support1b");
					placer.style.left=(s*2.5)+(cw)+"px";
					placer.style.top=((s*2)+ch)+"px";
					
					placer = document.getElementById("support1c");
					placer.style.left=(s*3.5)+(cw*2)+"px";
					placer.style.top=((s*2)+ch)+"px";
					
					placer = document.getElementById("support1d");
					placer.style.left=(s*4.5)+(cw*3)+"px";
					placer.style.top=((s*2)+ch)+"px";
					
					placer = document.getElementById("council1a");
					placer.style.left=(s*1.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";
					
					placer = document.getElementById("council1as1"); 
					placer.style.left=(s*1.5)+(cw-ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";
					
					placer = document.getElementById("council1as2"); 
					placer.style.left=(s*1.5)+(cw-ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";
					
					placer = document.getElementById("council1b"); 
					placer.style.left=(s*2.5)+(cw*1+ch*.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";
					
					placer = document.getElementById("council1bs1"); 
					placer.style.left=(s*2.5)+(cw*2)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";
					
					placer = document.getElementById("council1bs2"); 
					placer.style.left=(s*2.5)+(cw*2)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";
					
					placer = document.getElementById("council1c"); 
					placer.style.left=(s*3.5)+(cw*2+ch)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";
					
					placer = document.getElementById("council1cs1"); 
					placer.style.left=(s*3.5)+(cw*3+ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";
					
					placer = document.getElementById("council1cs2"); 
					placer.style.left=(s*3.5)+(cw*3+ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";
					
					placer = document.getElementById("council1d"); 
					placer.style.left=(s*4.5)+(cw*3+ch*1.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";
					
					placer = document.getElementById("council1ds1"); 
					placer.style.left=(s*4.5)+(cw*4+ch)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";
					
					placer = document.getElementById("council1ds2");
					placer.style.left=(s*4.5)+(cw*4+ch)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";
					
					//Player 2 area
					placer = document.getElementById("reward2"); 
					placer.style.left=(bw/2)+s+d+"px";
					placer.style.top=s-d+"px";
					
					placer = document.getElementById("leader2");
					placer.style.left=(bw/2)+((s*2.5)+ch)+"px";
					placer.style.top=s+"px";
					
					placer = document.getElementById("leader2s1");
					placer.style.left=(bw/2)+((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s-d+"px";
					
					placer = document.getElementById("leader2s2");
					placer.style.left=(bw/2)+((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s+(cw*1/5)-d+"px";
					
					placer = document.getElementById("leader2s3");
					placer.style.left=(bw/2)+((s*2.5)+ch)+cw/2+d+"px";
					placer.style.top=s+(cw*2/5)-d+"px";
					
					placer = document.getElementById("arena2");
					placer.style.left=(bw/2)+((s*7)+ch+cw+(ch/2))+d+"px";
					placer.style.top=(s-d)+"px";
					
					placer = document.getElementById("dungeon2"); 
					placer.style.left=(bw/2)+(cw*6+s*4)+"px";
					placer.style.top=s+"px";
					
					placer = document.getElementById("vault2");
					placer.style.left=(bw/2)+(cw*6+s*4)+"px";
					placer.style.top=((s*2)+ch)+"px";
					
					placer = document.getElementById("support2a"); 
					placer.style.left=(bw/2)+(s*1.5)+"px";
					placer.style.top=((s*2)+ch)+"px";
					
					placer = document.getElementById("support2b");
					placer.style.left=(bw/2)+(s*2.5)+(cw)+"px";
					placer.style.top=((s*2)+ch)+"px";
					
					placer = document.getElementById("support2c");
					placer.style.left=(bw/2)+(s*3.5)+(cw*2)+"px";
					placer.style.top=((s*2)+ch)+"px";
					
					placer = document.getElementById("support2d");
					placer.style.left=(bw/2)+(s*4.5)+(cw*3)+"px";
					placer.style.top=((s*2)+ch)+"px";
					
					placer = document.getElementById("council2a");
					placer.style.left=(bw/2)+(s*1.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";
					
					placer = document.getElementById("council2as1"); 
					placer.style.left=(bw/2)+(s*1.5)+(cw-ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";
					
					placer = document.getElementById("council2as2"); 
					placer.style.left=(bw/2)+(s*1.5)+(cw-ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";
					
					placer = document.getElementById("council2b"); 
					placer.style.left=(bw/2)+(s*2.5)+(cw*1+ch*.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";
					
					placer = document.getElementById("council2bs1"); 
					placer.style.left=(bw/2)+(s*2.5)+(cw*2)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";
					
					placer = document.getElementById("council2bs2"); 
					placer.style.left=(bw/2)+(s*2.5)+(cw*2)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";
					
					placer = document.getElementById("council2c"); 
					placer.style.left=(bw/2)+(s*3.5)+(cw*2+ch)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";
					
					placer = document.getElementById("council2cs1"); 
					placer.style.left=(bw/2)+(s*3.5)+(cw*3+ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";
					
					placer = document.getElementById("council2cs2"); 
					placer.style.left=(bw/2)+(s*3.5)+(cw*3+ch*.5)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";
					
					placer = document.getElementById("council2d"); 
					placer.style.left=(bw/2)+(s*4.5)+(cw*3+ch*1.5)+"px";
					placer.style.top=((s*3.5)+(ch*2))+"px";
					
					placer = document.getElementById("council2ds1"); 
					placer.style.left=(bw/2)+(s*4.5)+(cw*4+ch)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))-d+"px";
					
					placer = document.getElementById("council2ds2");
					placer.style.left=(bw/2)+(s*4.5)+(cw*4+ch)+d+"px";
					placer.style.top=((s*3.5)+(ch*2))+(cw*2/5)-d+"px";
					
					//Hand
					placeHand();
				}
				
				function redraw(){
					//Board
						//Background
						c.fillStyle="grey";
						c.fillRect(0,0,bw*2,bh*2);
						
						c.fillStyle="blue";
						c.fillRect(0,0,bw/2,bh);
						c.fillStyle="red";
						c.fillRect((bw/2)+1,0,bw/2,bh);
						
						//Player 1
						c.fillStyle="black";
						c.fillRect(((s*7)+ch+cw+(ch/2)),s,ch,cw);
						c.fillStyle="white";
						c.fillText("Arena", ((s*6)+22+ch+cw+(ch/2)), s+12);
						c.fillStyle="black";
						c.fillRect(s,(s),ch,cw);
						c.fillStyle="white";
						c.fillText("Reward Deck", s+15, ((s*2)+10));
						c.fillStyle="black";
						c.fillRect(((s*2)+ch), (s), ((s*2)+cw+(ch/2)),ch);
						c.fillStyle="white";
						c.fillText("Leader Area", ((s*2)+10+ch), (s+15));
						c.fillStyle="black";
						c.fillRect((cw*6+s*4),(s),cw,ch);
						c.fillRect(s, ((s*1.5)+ch), ((cw*4)+(s*4)), (s+ch));
						c.fillRect((cw*6+s*4),((s*2)+ch),cw,ch);
						c.fillRect(s, ((s*3)+(ch*2)), ((cw*4)+(ch*2)+(s*4)), (s+ch));
						c.fillStyle="white";
						c.fillText("Dungeon", (cw*6+s*4+5),(s+12));
						c.fillText("Support Area", s+12, ((s*1.5)+ch+12));
						c.fillText("Vault", (cw*6+s*4+5),((s*2)+ch+12));
						c.fillText("Council", s+12, ((s*3)+(ch*2)+12));
						
						//Player 2
						c.fillStyle="black";
						c.fillRect(((s*7)+ch+cw+(ch/2))+(bw/2),s,ch,cw);
						c.fillStyle="white";
						c.fillText("Arena", ((s*6)+22+ch+cw+(ch/2))+(bw/2), s+12);
						c.fillStyle="black";
						c.fillRect(s+(bw/2),(s),ch,cw);
						c.fillStyle="white";
						c.fillText("Reward Deck", s+15+(bw/2), ((s*2)+10));
						c.fillStyle="black";
						c.fillRect(((s*2)+ch)+(bw/2), (s), ((s*2)+cw+(ch/2)),ch);
						c.fillStyle="white";
						c.fillText("Leader Area", ((s*2)+10+ch)+(bw/2), (s+15));
						c.fillStyle="black";
						c.fillRect((cw*6+s*4)+(bw/2),(s),cw,ch);
						c.fillRect(s+(bw/2), ((s*1.5)+ch), ((cw*4)+(s*4)), (s+ch));
						c.fillRect((cw*6+s*4)+(bw/2),((s*2)+ch),cw,ch);
						c.fillRect(s+(bw/2), ((s*3)+(ch*2)), ((cw*4)+(ch*2)+(s*4)), (s+ch));
						c.fillStyle="white";
						c.fillText("Dungeon", (cw*6+s*4+5)+(bw/2),(s+12));
						c.fillText("Support Area", s+12+(bw/2), ((s*1.5)+ch+12));
						c.fillText("Vault", (cw*6+s*4+5)+(bw/2),((s*2)+ch+12));
						c.fillText("Council", s+12+(bw/2), ((s*3)+(ch*2)+12));
						
						//Hand
						c.fillStyle="black";
						c.fillRect(0, ((s*5)+(ch*3)), (cw*8), (s+ch));
						c.fillStyle="white";
						c.fillText("Hand", 12, ((s*5)+(ch*3)+12));
					
					//Phase
					c.fillStyle="green";
					c.fillRect(s*18+(bw/2), ((s*9)+(ch*3)), s*20, (s*4));
					c.fillStyle="yellow";
					c.fillRect(s*18+(bw/2)+(s*4*(currentPhase-1)), ((s*9)+(ch*3)), s*4, (s*4))
					
					//Timer
					c.fillStyle="black";
					c.fillRect(s*18+(bw/2), ((s*5)+(ch*3)), s*20, (s*4));
					
					pictures.forEach(clearPictures);
					drawPictures();
					pictures.forEach(resizePictures);
					placePictures();
					
					if(setUp<2){
						c.fillStyle="grey";
						c.fillRect(0,0,bw,bh);
						if(setUp<1){
							deckSelect();
						}
						else{
							selectLeader();
						}
					}
				}
				
				function getMousePos(theCanvas, event) {
					var rect = theCanvas.getBoundingClientRect();
					return {
						x: event.clientX - rect.left,
						y: event.clientY - rect.top
					};
				}
				function isInside(pos, rect){
					return pos.x > rect.x && pos.x < rect.x+rect.width && pos.y < rect.y+rect.height && pos.y > rect.y
				}
				
				var rect = [{
					x:s*18+(bw/2),
					y:((s*5)+(ch*3)),
					width:s*20,
					height:(s*4)
				},
					{
					x:s*18+(bw/2),
					y:((s*9)+(ch*3)),
					width:s*4,
					height:(s*4)
				},
					{
					x:s*18+(bw/2)+(s*4),
					y:((s*9)+(ch*3)),
					width:s*4,
					height:(s*4)
				},
					{
					x:s*18+(bw/2)+(s*4*2),
					y:((s*9)+(ch*3)),
					width:s*4,
					height:(s*4)
				},
					{
					x:s*18+(bw/2)+(s*4*3),
					y:((s*9)+(ch*3)),
					width:s*4,
					height:(s*4)
				},
					{
					x:s*18+(bw/2)+(s*4*4),
					y:((s*9)+(ch*3)),
					width:s*4,
					height:(s*4)
				}];
				
				theCanvas.addEventListener('click', function(evt) {
					var mousePos = getMousePos(theCanvas, evt);
					
					if (isInside(mousePos,rect[0])) {
						if(paused<1){
							alert('Pausing Timer');
							pauseTimer();
							paused=1;
						}
						else{
							alert('Resuming Timer');
							resumeTimer();
							paused=0;
						}
					}
					else if(isInside(mousePos,rect[1])){
						alert('Changing to Judgement Phase');
						currentPhase=1;
					}	
					else if(isInside(mousePos,rect[2])){
						alert('Changing to Draw Phase');
						currentPhase=2;
					}	
					else if(isInside(mousePos,rect[3])){
						alert('Changing to Tactics Phase');
						currentPhase=3;
					}	
					else if(isInside(mousePos,rect[4])){
						alert('Changing to Brawl Phase');
						currentPhase=4;
					}	
					else if(isInside(mousePos,rect[5])){
						alert('Changing to End Phase');
						currentPhase=5;
					}	
				});
				
				function pauseTimer(){
					window.clearInterval(trueTime)
				}
				
				function resumeTimer(){
					trueTime=setInterval(function(){
						time++;
						if(time>59){
							minutes=minutes+1;
							time=time-60;
						}
						redraw();
						drawElapsedTime();},1000)
				}
				
				function drawElapsedTime(){
					c.fillStyle="white";
					c.font="26px Georgia";
					c.fillText(minutes+":"+time,s*25+(bw/2), ((s*8)+(ch*3)));
					c.font="12px Georgia";
				}
			   
				var modalImg = document.getElementById("img01");
				function zoomIn(x){
					modal.style.display = "block";
					modalImg.src = x.src;
					captionText.innerHTML = x.alt;
				}

				// Get the <span> element that closes the modal
				var span = document.getElementsByClassName("close")[0];

				// When the user clicks on <span> (x), close the modal
				span.onclick = function() { 
					modal.style.display = "none";
				}
		</script>
	</body>
</html>