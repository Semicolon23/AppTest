<!DOCTYPE html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<style>
		.rotate90 {
			-webkit-transform: rotate(90deg);
			-moz-transform: rotate(90deg);
			-o-transform: rotate(90deg);
			-ms-transform: rotate(90deg);
			transform: rotate(90deg);
		}
		.rotate0 {
			-webkit-transform: rotate(0deg);
			-moz-transform: rotate(0deg);
			-o-transform: rotate(0deg);
			-ms-transform: rotate(0deg);
			transform: rotate(0deg);
		}
		body {background-color: grey;}
		</style>
		<img id="back" width="70" height="100" src="CardBack.png" alt="Card Back">
	</head>
	<body style="margin: 0px; overflow: hidden">
		<canvas id="myCanvas" style="position: absolute; left:0px; top:0px; z-index:1;"></canvas>
		<img id="back" width="70" height="100" src="CardBack.png" style="position: absolute; left:0px; top:0px; z-index:0;" alt="Card Back">
		<img id="reward1" width="70" height="100" class="rotate90" src="CardBack.png" style="position: absolute; left:15px; top:-15px; z-index:3;" alt="Card Back" >
		<img id="reward2" width="35" height="50" class="rotate90" src="CardBack.png" style="position: absolute; left:7px; top:-7px; z-index:3;" alt="Card Back" >
		<script>
			var theCanvas = document.getElementById("myCanvas"),
				c = theCanvas.getContext("2d"),
				cardHeight=100, cardWidth=75, boardWidth=window.innerWidth, boardHeight=window.innerHeight, spacing=25,
				ch=cardHeight, cw=cardWidth, bw=boardWidth, bh=boardHeight, s=spacing;
			var currentPhase=2;
			var startTime = new Date().getTime();
			var paused=true;
			var trueTime;
			var time=0;
			var minutes=0;
			var pictures = document.getElementsByTagName("IMG");
			var testImage = document.getElementById("reward1");
			
			testImage.style.left=200;
			testImage.height=200;
			testImage.class="rotate0";
			
				drawElapsedTime();
				
				function pauseTimer(){
					window.clearInterval(trueTime)
				}
				
				function resumeTimer(){
					trueTime=setInterval(function(){
						time++;
						if(time>59){
							minutes=minutes+1;
							time=time-60;
						}
						drawElapsedTime();},1000)
				}
				
				function drawElapsedTime(){
					redraw();
					c.fillStyle="white";
					c.font="26px Georgia";
					c.fillText(minutes+":"+time,s*25+(bw/2), ((s*8)+(ch*3)));
					c.font="12px Georgia";
				}
				
				(function() {
			   // Start listening to resize events and draw canvas.
			   initialize();
				function initialize() {
				   // Register an event listener to call the resizeCanvas() function 
				   // each time the window is resized.
				   window.addEventListener('resize', resizeCanvas, false);
				   // Draw canvas border for the first time.
				   resizeCanvas();
				   drawElapsedTime();
				}
				
				
				// Runs each time the DOM window resize event fires.
				// Resets the canvas dimensions to match window,
				// then draws the new borders accordingly.
				function resizeCanvas() {
						bw = window.innerWidth;
						bh = window.innerHeight;
						//if((bh*3)>(bw*2)){
							cw = bw/16;
							ch = cw*10/7;
							s=ch/7;
						//}
						//else if((bw*2)>(bh*3)){
						//	ch = bh/10;
						//	cw = ch*7/10;
						//	s=ch/6;
						//}
						c.font="12px Georgia";
						theCanvas.width=bw;
						theCanvas.height=bh;
						//pictures.forEach(resizePictures);
						placePictures();
						redraw();
					}
				})();
				
				function resizePictures(item){
					item.width=cw;
					item.height=ch;
				}
				
				function placePictures(){
				
				}
				
				function redraw(){
					//Board
						//Background
						c.fillStyle="grey";
						c.fillRect(0,0,bw*2,bh*2);
						
						c.fillStyle="blue";
						c.fillRect(0,0,bw/2,bh);
						c.fillStyle="red";
						c.fillRect((bw/2)+1,0,bw/2,bh);
						
						//Player 1
						c.fillStyle="black";
						c.fillRect(((s*7)+ch+cw+(ch/2)),s,ch,cw);
						c.fillStyle="white";
						c.fillText("Arena", ((s*6)+22+ch+cw+(ch/2)), s+12);
						c.fillStyle="black";
						c.fillRect(s,(s),ch,cw);
						c.fillStyle="white";
						c.fillText("Reward Deck", s+15, ((s*2)+10));
						c.fillStyle="black";
						c.fillRect(((s*2)+ch), (s), ((s*2)+cw+(ch/2)),ch);
						c.fillStyle="white";
						c.fillText("Leader Area", ((s*2)+10+ch), (s+15));
						c.fillStyle="black";
						c.fillRect((cw*6+s*4),(s),cw,ch);
						c.fillRect(s, ((s*1.5)+ch), ((cw*4)+(s*4)), (s+ch));
						c.fillRect((cw*6+s*4),((s*2)+ch),cw,ch);
						c.fillRect(s, ((s*3)+(ch*2)), ((cw*4)+(ch*2)+(s*4)), (s+ch));
						c.fillStyle="white";
						c.fillText("Dungeon", (cw*6+s*4+5),(s+12));
						c.fillText("Support Area", s+12, ((s*1.5)+ch+12));
						c.fillText("Vault", (cw*6+s*4+5),((s*2)+ch+12));
						c.fillText("Council", s+12, ((s*3)+(ch*2)+12));
						
						//Player 2
						c.fillStyle="black";
						c.fillRect(((s*7)+ch+cw+(ch/2))+(bw/2),s,ch,cw);
						c.fillStyle="white";
						c.fillText("Arena", ((s*6)+22+ch+cw+(ch/2))+(bw/2), s+12);
						c.fillStyle="black";
						c.fillRect(s+(bw/2),(s),ch,cw);
						c.fillStyle="white";
						c.fillText("Reward Deck", s+15+(bw/2), ((s*2)+10));
						c.fillStyle="black";
						c.fillRect(((s*2)+ch)+(bw/2), (s), ((s*2)+cw+(ch/2)),ch);
						c.fillStyle="white";
						c.fillText("Leader Area", ((s*2)+10+ch)+(bw/2), (s+15));
						c.fillStyle="black";
						c.fillRect((cw*6+s*4)+(bw/2),(s),cw,ch);
						c.fillRect(s+(bw/2), ((s*1.5)+ch), ((cw*4)+(s*4)), (s+ch));
						c.fillRect((cw*6+s*4)+(bw/2),((s*2)+ch),cw,ch);
						c.fillRect(s+(bw/2), ((s*3)+(ch*2)), ((cw*4)+(ch*2)+(s*4)), (s+ch));
						c.fillStyle="white";
						c.fillText("Dungeon", (cw*6+s*4+5)+(bw/2),(s+12));
						c.fillText("Support Area", s+12+(bw/2), ((s*1.5)+ch+12));
						c.fillText("Vault", (cw*6+s*4+5)+(bw/2),((s*2)+ch+12));
						c.fillText("Council", s+12+(bw/2), ((s*3)+(ch*2)+12));
						
						//Hand
						c.fillStyle="black";
						c.fillRect(0, ((s*5)+(ch*3)), (cw*8), (s+ch));
						c.fillStyle="white";
						c.fillText("Hand", 12, ((s*5)+(ch*3)+12));
					
					//Phase
					c.fillStyle="green";
					c.fillRect(s*18+(bw/2), ((s*9)+(ch*3)), s*20, (s*4));
					c.fillStyle="yellow";
					c.fillRect(s*18+(bw/2)+(s*4*(currentPhase-1)), ((s*9)+(ch*3)), s*4, (s*4))
					
					//Timer
					c.fillStyle="black";
					c.fillRect(s*18+(bw/2), ((s*5)+(ch*3)), s*20, (s*4));
				}
				
				function getMousePos(theCanvas, event) {
					var rect = theCanvas.getBoundingClientRect();
					return {
						x: event.clientX - rect.left,
						y: event.clientY - rect.top
					};
				}
				function isInside(pos, rect){
					return pos.x > rect.x && pos.x < rect.x+rect.width && pos.y < rect.y+rect.heigth && pos.y > rect.y
				}

				var rect = {
					x:s*18+(bw/2),
					y:((s*5)+(ch*3)),
					width:s*20,
					heigth:(s*4)
				};
				
				theCanvas.addEventListener('click', function(evt) {
					var mousePos = getMousePos(theCanvas, evt);
					debugger;
					if (isInside(mousePos,rect)) {
						alert('clicked inside rect');
						if(paused==false){
							pauseTimer();
							paused=true;
						}
						else{
							resumeTimer();
							paused=false;
						}
					}else{
					}	
				}, false);
			   
		</script>
	</body>
</html>